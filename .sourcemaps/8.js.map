{"version":3,"sources":["../../src/pages/resources/resources.module.ts","../../src/pages/resources/resources.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ResourcesPage } from './resources';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ResourcesPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ResourcesPage),\r\n  ],\r\n  exports: [\r\n    ResourcesPage\r\n  ]\r\n})\r\nexport class ResourcesPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/resources/resources.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, Platform } from 'ionic-angular';\r\nimport { FileOpener } from '@ionic-native/file-opener';\r\nimport { File } from '@ionic-native/file';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-resources',\r\n  templateUrl: 'resources.html',\r\n})\r\nexport class ResourcesPage {\r\n  resources: any=[]\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    private fileOpener: FileOpener,\r\n    private file: File,\r\n    public platform: Platform) {\r\n    \r\n    if (this.platform.is('mobile')) {\r\n      console.log('mobile platform')\r\n      this.checkFileDirectory()\r\n  ***REMOVED***\r\n    else {\r\n      console.log('not mobile platform')\r\n      this.setResources()\r\n  ***REMOVED***\r\n    \r\n    \r\n    \r\n***REMOVED***\r\n\r\n  checkFileDirectory() {\r\n    console.log('checking file directory')\r\n    this.file.checkDir(this.file.externalApplicationStorageDirectory, 'picsa')\r\n      .then(_ => {\r\n        console.log('file directory exists');\r\n        this.setResources()\r\n    ***REMOVED***)\r\n      .catch(err => {\r\n        this.file.createDir(this.file.externalApplicationStorageDirectory, 'picsa', false).then(() => {\r\n          console.log('pics directory created')\r\n          this.setResources()\r\n      ***REMOVED***).catch(err => { console.log(err) })\r\n    ***REMOVED***)\r\n***REMOVED***\r\n  \r\n  ionViewDidLoad() { }\r\n  \r\n  list(dir, path) {\r\n    console.log('listing', path)\r\n    this.file.listDir(dir, path).then(res => {\r\n      console.log('list:',path, res)\r\n  ***REMOVED***).catch(err => { console.log('err', err) })\r\n***REMOVED***\r\n\r\n  //works if resource placed in assets/resourrces folder. Can later use directory reader to populate list\r\n  loadResource(resource) {\r\n    console.log('loading resource',resource)\r\n    if (resource.type == \"pdf\") {\r\n      this.openResource(resource)\r\n  ***REMOVED***\r\n***REMOVED***\r\n  openResource(resource) {\r\n    if(!this.platform.is('cordova')){return this.openWebResource(resource)}\r\n    this.file.copyFile(this.file.applicationDirectory + 'www/assets/resources/', resource.filename, this.file.externalApplicationStorageDirectory + 'picsa/', resource.filename)\r\n      .then(_ => {\r\n        console.log('file copied successfully', resource.filename)\r\n        console.log('opening file',resource.filename)\r\n        this.fileOpener.open(this.file.externalApplicationStorageDirectory+'picsa/' + resource.filename, 'application/pdf')\r\n          .then(_ => console.log('openned successfully')).catch(err => {\r\n            err => console.log('file opener err', err);\r\n            this.list(this.file.externalApplicationStorageDirectory, 'picsa')\r\n        ***REMOVED***)\r\n    ***REMOVED***).catch(\r\n      err => {\r\n        console.log('file copy error', err)\r\n        this.fileOpener.open(this.file.externalApplicationStorageDirectory + resource.filename, 'application/pdf')\r\n          .then(_=>console.log('opened successfuly')).catch(err => {\r\n            err => console.log('file opener error', err);\r\n            this.list(this.file.externalApplicationStorageDirectory, 'picsa')\r\n        ***REMOVED***)\r\n    ***REMOVED***)    \r\n***REMOVED***\r\n  openWebResource(resource) {\r\n    // open resource for browser or simulator version. Currently files manually added to firebase storage and url copied. In future could automate.\r\n    // refs: https://firebase.google.com/docs/storage/web/download-files\r\n    console.log('opening resource', resource)\r\n    window.open(resource.weblink, '_blank');\r\n\r\n***REMOVED***\r\n  setResources() {\r\n    this.resources = [\r\n      { name: 'Picsa Manual', filename: 'picsa-field-manual.pdf', type: 'pdf', image: 'assets/resources/picsa-field-manual-cover.png', weblink:'https://firebasestorage.googleapis.com/v0/b/extension-toolkit.appspot.com/o/Resources%2Fpicsa-field-manual.pdf?alt=media&token=c394b68a-3f67-4494-8620-c35d65151c45' },\r\n      { name: 'Crop Information - Chileka', filename: 'crop-info-sheet-chileka.pdf', type: 'pdf', image: 'assets/resources/crop-info-sheet-chileka-cover.png', weblink:'https://firebasestorage.googleapis.com/v0/b/extension-toolkit.appspot.com/o/Resources%2Fcrop-info-sheet-chileka.pdf?alt=media&token=cb8a6243-1d37-43f6-a97c-a0a7bc0f11f2' },\r\n      { name: 'Potential Training Schedule', filename: 'potential-PICSA-training-schedule.pdf', type: 'pdf', image: 'assets/resources/potential-PICSA-training-schedule-cover.png', weblink:'https://firebasestorage.googleapis.com/v0/b/extension-toolkit.appspot.com/o/Resources%2Fpotential-PICSA-training-schedule.pdf?alt=media&token=618737d1-949b-467a-9f28-1dcc35ce3c8c' },\r\n      { name: 'Seasonal Forecase Blantyre', filename: 'seasonal-forecast-blantyre.pdf', type: 'pdf', image: 'assets/resources/seasonal-forecast-blantyre-cover.png', weblink:'https://firebasestorage.googleapis.com/v0/b/extension-toolkit.appspot.com/o/Resources%2Fseasonal-forecast-blantyre.pdf?alt=media&token=6ba42494-4c23-409f-ac55-f2fa8b3043ea' },\r\n    ]\r\n***REMOVED***\r\n}  \r\n\r\n\r\n    // this.file.copyFile(this.file.applicationDirectory + 'www/assets', 'picsa-field-manual.pdf', this.file.externalApplicationStorageDirectory, 'picsa-field-manual.pdf')\r\n    //   .then(_ => {\r\n    //     console.log('external data', this.file.externalApplicationStorageDirectory)\r\n    //     FileOpener.open(this.file.externalApplicationStorageDirectory + '/picsa-field-manual.pdf', 'application/pdf')\r\n    // ***REMOVED***).catch(\r\n    //   err => {\r\n    //     console.log(err)\r\n    //     FileOpener.open(this.file.externalApplicationStorageDirectory + '/picsa-field-manual.pdf', 'application/pdf')\r\n    // ***REMOVED***\r\n    //   )\r\n\r\n    // this.file.checkDir(this.file.dataDirectory, 'picsa')\r\n    //   .then(_ => {\r\n    //     console.log('Directory exists')\r\n    // ***REMOVED***)\r\n    //   .catch(err => {\r\n    //     this.file.createDir(this.file.dataDirectory, 'picsa', false).then(() => {\r\n    //       this.file.copyDir(this.file.applicationDirectory + 'www/assets', 'resources', this.file.dataDirectory + '/picsa', 'resources')\r\n    //         .then(_ => {\r\n    //           console.log('folder successfully copied')\r\n    //           this.list(this.file.dataDirectory, 'picsa/assets')\r\n    //       ***REMOVED***)\r\n    //   ***REMOVED***).catch(err => { console.log(err) })\r\n    // ***REMOVED***)\n\n\n// WEBPACK FOOTER //\n// ./src/pages/resources/resources.ts"],"sourceRoot":""}